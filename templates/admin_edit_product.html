{% extends "base.html" %}
{% block content %}
<h2>编辑商品</h2>
<form method="post">
  标题: <input type="text" name="title" value="{{ product.title }}" required><br>
  价格: <input type="number" step="0.01" name="price" value="{{ product.price }}" required><br>
  SKU: <input type="text" name="sku" value="{{ product.variants[0].sku if product.variants else '' }}" required><br>
  类别:
  <div style="max-height:200px;overflow:auto;border:1px solid #ddd;padding:6px;">
    <option value="">(未指定)</option>
    {% for c in categories %}
      <option value="{{ c._id }}" {% if product.categoryId and str(product.categoryId)==str(c._id) %}selected{% endif %}>
        {{ c.path or c.name }}
      </option>
    {% endfor %}
  </div><br>
  类别（可多选）：
  <div>
    {% for c in categories %}
      {% if product and product.categoryIds and (c._id in product.categoryIds) %}
        {% set ckd = 'checked' %}
      {% else %}
        {% set ckd = '' %}
      {% endif %}
      <label style="display:inline-block;min-width:260px;">
        <input type="checkbox" name="categoryIds" value="{{ c._id }}" {{ ckd }}> {{ c.path or c.name }}
      </label>
    {% endfor %}
  </div>

  <button type="submit">保存修改</button>
</form>
{% endblock %}
